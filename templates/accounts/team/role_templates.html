{% extends 'base.html' %}
{% load static %}

{% block title %}Role Templates - DreamBiz Accounting{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-3xl font-bold text-gray-900">Role Templates</h1>
        <p class="mt-2 text-sm text-gray-600">
          Create and manage custom role templates for your team
        </p>
      </div>
      <div class="flex space-x-3">
        <a href="{% url 'accounts:team_dashboard' %}" 
           class="inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors">
          <i class="fas fa-arrow-left mr-2"></i>
          Back to Team
        </a>
        <a href="{% url 'accounts:create_role_template' %}" 
           class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors">
          <i class="fas fa-plus mr-2"></i>
          Create Role Template
        </a>
      </div>
    </div>
  </div>

  <!-- Default Roles Section -->
  <div class="mb-8">
    <h2 class="text-xl font-semibold text-gray-900 mb-4">Default System Roles</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Administrator -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center">
            <div class="h-12 w-12 bg-purple-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-user-shield text-purple-600 text-xl"></i>
            </div>
            <div class="ml-3">
              <h3 class="text-lg font-semibold text-gray-900">Administrator</h3>
              <span class="text-xs text-gray-500 uppercase">System Role</span>
            </div>
          </div>
        </div>
        <p class="text-sm text-gray-600 mb-4">
          Full access to all features and settings. Can manage team members and permissions.
        </p>
        <div class="flex items-center text-xs text-gray-500">
          <i class="fas fa-lock mr-1"></i>
          Cannot be modified
        </div>
      </div>

      <!-- Accountant -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center">
            <div class="h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-calculator text-green-600 text-xl"></i>
            </div>
            <div class="ml-3">
              <h3 class="text-lg font-semibold text-gray-900">Accountant</h3>
              <span class="text-xs text-gray-500 uppercase">System Role</span>
            </div>
          </div>
        </div>
        <p class="text-sm text-gray-600 mb-4">
          Access to financial features: Invoicing, Expenses, Bank Reconciliation, and Reports.
        </p>
        <div class="flex items-center text-xs text-gray-500">
          <i class="fas fa-lock mr-1"></i>
          Cannot be modified
        </div>
      </div>

      <!-- Manager -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center">
            <div class="h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-user-tie text-blue-600 text-xl"></i>
            </div>
            <div class="ml-3">
              <h3 class="text-lg font-semibold text-gray-900">Manager</h3>
              <span class="text-xs text-gray-500 uppercase">System Role</span>
            </div>
          </div>
        </div>
        <p class="text-sm text-gray-600 mb-4">
          Access to operational features: HR, Sales, Welfare, and Reports.
        </p>
        <div class="flex items-center text-xs text-gray-500">
          <i class="fas fa-lock mr-1"></i>
          Cannot be modified
        </div>
      </div>

      <!-- Employee -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center">
            <div class="h-12 w-12 bg-teal-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-user text-teal-600 text-xl"></i>
            </div>
            <div class="ml-3">
              <h3 class="text-lg font-semibold text-gray-900">Employee</h3>
              <span class="text-xs text-gray-500 uppercase">System Role</span>
            </div>
          </div>
        </div>
        <p class="text-sm text-gray-600 mb-4">
          Limited access to view dashboard and submit own expenses.
        </p>
        <div class="flex items-center text-xs text-gray-500">
          <i class="fas fa-lock mr-1"></i>
          Cannot be modified
        </div>
      </div>

      <!-- Viewer -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center">
            <div class="h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-eye text-gray-600 text-xl"></i>
            </div>
            <div class="ml-3">
              <h3 class="text-lg font-semibold text-gray-900">Viewer</h3>
              <span class="text-xs text-gray-500 uppercase">System Role</span>
            </div>
          </div>
        </div>
        <p class="text-sm text-gray-600 mb-4">
          Read-only access to most features. Cannot create or modify data.
        </p>
        <div class="flex items-center text-xs text-gray-500">
          <i class="fas fa-lock mr-1"></i>
          Cannot be modified
        </div>
      </div>
    </div>
  </div>

  <!-- Custom Role Templates Section -->
  {% if templates %}
  <div class="mb-8">
    <h2 class="text-xl font-semibold text-gray-900 mb-4">Custom Role Templates</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for template in templates %}
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center">
            <div class="h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-user-tag text-indigo-600 text-xl"></i>
            </div>
            <div class="ml-3">
              <h3 class="text-lg font-semibold text-gray-900">{{ template.name }}</h3>
              {% if template.is_default %}
              <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                Default
              </span>
              {% endif %}
            </div>
          </div>
        </div>
        <p class="text-sm text-gray-600 mb-4">
          {{ template.description|default:"No description provided." }}
        </p>
        <div class="flex items-center justify-between">
          <span class="text-xs text-gray-500">
            Created {{ template.created_at|date:"M d, Y" }}
          </span>
          <div class="flex space-x-2">
            <a href="#" class="text-blue-600 hover:text-blue-700 text-sm">
              <i class="fas fa-edit"></i>
            </a>
            <a href="#" class="text-red-600 hover:text-red-700 text-sm">
              <i class="fas fa-trash"></i>
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% else %}
  <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center">
    <div class="max-w-md mx-auto">
      <div class="h-16 w-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <i class="fas fa-user-tag text-gray-400 text-2xl"></i>
      </div>
      <h3 class="text-lg font-semibold text-gray-900 mb-2">No Custom Role Templates</h3>
      <p class="text-gray-600 mb-6">
        Create custom role templates to streamline your team management process.
      </p>
      <a href="{% url 'accounts:create_role_template' %}" 
         class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors">
        <i class="fas fa-plus mr-2"></i>
        Create Your First Template
      </a>
    </div>
  </div>
  {% endif %}

  <!-- Information Box -->
  <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
    <div class="flex items-start">
      <div class="flex-shrink-0">
        <i class="fas fa-info-circle text-blue-600 text-xl"></i>
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-semibold text-blue-900 mb-1">About Role Templates</h3>
        <div class="text-sm text-blue-800">
          <p class="mb-2">
            Role templates allow you to create pre-configured permission sets that can be quickly applied to team members.
          </p>
          <ul class="list-disc list-inside space-y-1 ml-4">
            <li>System roles (Administrator, Accountant, Manager, Employee, Viewer) cannot be modified</li>
            <li>Custom templates can be created with any combination of permissions</li>
            <li>Set a default template to automatically assign permissions to new members</li>
            <li>Individual permissions can still be customized per team member</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
